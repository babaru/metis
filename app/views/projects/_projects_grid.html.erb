<%= grid(@projects_grid, :show_filters => :always) do |g|
  g.column name: t('activerecord.attributes.client.name') do |project|
    project.client.name
  end

  g.column name: t('activerecord.attributes.project.name') do |project|
    link_to content_tag(:strong, project.name), client_project_master_plan_path(id: project.current_master_plan_id, client_id: project.client_id, project_id: project.id)
  end

  g.column name: t('activerecord.attributes.project.started_at') do |project|
    project.started_at.strftime('%Y-%m-%d') if project.started_at
  end

  g.column name: t('activerecord.attributes.project.ended_at') do |project|
    project.ended_at.strftime('%Y-%m-%d') if project.ended_at
  end

  g.column name: t('activerecord.attributes.project.budget') do |project|
    content_tag(:strong, number_to_currency(project.budget, precision: 0, unit: '￥'))
  end

  g.column :html => {class: 'btn-cell'} do |project|
    link_to(icon('icon-user'), manage_project_assignments_path(id: project), rel: 'tooltip', title: '分配项目', class: 'btn-inverse btn') if can? :manage, :project
  end

  g.column :html => {class: 'btn-cell'} do |project|
    link_to(icon('icon-edit'), edit_project_path(project), :class => 'btn btn-warning', :rel => 'tooltip', :title => t('buttons.edit')) if can? :update, Project
  end

  g.column :html => {class: 'btn-cell'} do |project|
    link_to(icon('icon-trash'), project_path(project), :method => :delete, :confirm => t("confirms.delete"), :class => 'btn btn-danger', :rel => 'tooltip', :title => t('buttons.delete')) if can? :destroy, Project
  end
end -%>
